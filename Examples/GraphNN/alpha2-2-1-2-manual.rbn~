@layer_0_0([node]v)= blue(v);
@layer_0_1([node]v)= green(v);
@layer_0_2([node]v)= red(v);
@layer_0_3([node]v)= yellow(v);
@layer_0_4([node]v)= purple(v);

% total no. of blue
@read_0_0() = COMBINE @layer_0_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 
@read_0_1() = COMBINE @layer_0_1(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 
@read_0_2() = COMBINE @layer_0_2(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 
@read_0_3() = COMBINE @layer_0_3(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 
@read_0_4() = COMBINE @layer_0_4(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w);
	 
% no. blue neighbors
@agg_0_0([node]v) = COMBINE @layer_0_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 
@agg_0_1([node]v) = COMBINE @layer_0_1(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 
@agg_0_2([node]v) = COMBINE @layer_0_2(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 
@agg_0_3([node]v) = COMBINE @layer_0_3(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 
@agg_0_4([node]v) = COMBINE @layer_0_4(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 

% exists >=8 y(blue(y) & ~E(v,y))
@layer_1_0([node]v)= COMBINE 
	 (0*@layer_0_0(v)), 
	 (0*@layer_0_1(v)), 
	 (0*@layer_0_2(v)), 
	 (0*@layer_0_3(v)), 
	 (0*@layer_0_4(v)), 
	 (-69*@agg_0_0(v)), 
	 (0*@agg_0_1(v)), 
	 (0*@agg_0_2(v)), 
	 (0*@agg_0_3(v)), 
	 (0*@agg_0_4(v)), 
	 (69*@read_0_0()), 
	 (0*@read_0_1()), 
	 (0*@read_0_2()), 
	 (0*@read_0_3()), 
	 (0*@read_0_4()), 
	 9.1
	 WITH l-reg 
	 FORALL;

% exists <=10 y(blue(y) & ~E(v,y))
@layer_1_1([node]v)= COMBINE 
	 (0*@layer_0_0(v)), 
	 (0*@layer_0_1(v)), 
	 (0*@layer_0_2(v)), 
	 (0*@layer_0_3(v)), 
	 (0*@layer_0_4(v)), 
	 (96*@agg_0_0(v)), 
	 (0*@agg_0_1(v)), 
	 (0*@agg_0_2(v)), 
	 (0*@agg_0_3(v)), 
	 (0*@agg_0_4(v)), 
	 (-96*@read_0_0()), 
	 (0*@read_0_1()), 
	 (0*@read_0_2()), 
	 (0*@read_0_3()), 
	 (0*@read_0_4()), 
	 9.1
	 WITH l-reg 
	 FORALL;

@read_1_0() = COMBINE @layer_1_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 
@read_1_1() = COMBINE @layer_1_1(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w); 

@agg_1_0([node]v) = COMBINE @layer_1_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 
@agg_1_1([node]v) = COMBINE @layer_1_1(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 

% alpha1(v)
@layer_2_0([node]v)= COMBINE 
	 (-13*@layer_1_0(v)), 
	 (-13*@layer_1_1(v)), 
	 (0*@agg_1_0(v)), 
	 (0*@agg_1_1(v)), 
	 (0*@read_1_0()), 
	 (0*@read_1_1()), 
	 9.1
	 WITH l-reg 
	 FORALL;

% total no. of alpha1
@read_2_0() = COMBINE @layer_2_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE node(w);
	 
% no. of alpha1 neighbors
@agg_2_0([node]v) = COMBINE @layer_2_0(w) 
	 WITH sum 
	 FORALL w 
	 WHERE (edge(v,w)|edge(w,v)); 

% exists >= 10 y(alpha1(y) & ~E(v,y))
@layer_3_0([node]v)= COMBINE 
	 (0*@layer_2_0(v)), 
	 (-87*@agg_2_0(v)), 
	 (87*@read_2_0()), 
	 9.1
	 WITH l-reg 
	 FORALL;

% exists <=20 y(alpha1(y) & ~E(v,y))
@layer_3_1([node]v)= COMBINE 
	 (0*@layer_2_0(v)), 
	 (188*@agg_2_0(v)), 
	 (-188*@read_2_0()), 
	 9.1
	 WITH l-reg 
	 FORALL;

alpha2([node]v)= COMBINE 
	 (-13*@layer_3_0(v)), 
	 (-13*@layer_3_1(v)), 
	 9.1
	 WITH l-reg 
	 FORALL ;

